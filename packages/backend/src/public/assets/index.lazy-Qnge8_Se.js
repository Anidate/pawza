import{a as L,u as c,r as i,d as F,j as e,N as m,F as d,B as u,T as x,s as S,c as T}from"./index-CWh3fZhP.js";import{C as A,A as k,d as B,T as l,B as D,L as E}from"./LockOutlined-tqLgg482.js";const P=t=>L.post("/auth/login",t);function W(t){return e.jsxs(x,{variant:"body2",color:"text.secondary",align:"center",...t,children:["Copyright Â© Pawza ",new Date().getFullYear(),"."]})}function R(){const{setUser:t,user:a}=c(),[o,h]=i.useState(""),[r,p]=i.useState(""),{mutateAsync:g,isPending:j,isSuccess:f}=F({mutationFn:s=>P(s)}),y=async s=>{s.preventDefault();try{const n=await g({email:o,password:r});if(n.status===200){const{user:C,token:b,refreshToken:w}=n.data;t(C),S(b,w)}}catch{}};if(a)return e.jsx(m,{to:"/home"});const v=j||f&&!a;return e.jsxs(A,{maxWidth:"xs",sx:{py:"12lvh"},children:[v?e.jsx(d,{}):e.jsxs(u,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(k,{sx:{m:1,bgcolor:"secondary.main"},children:e.jsx(B,{})}),e.jsx(x,{component:"h1",variant:"h5",children:"Log in"}),e.jsxs(u,{component:"form",onSubmit:y,noValidate:!0,sx:{mt:1},children:[e.jsx(l,{margin:"normal",required:!0,fullWidth:!0,label:"Email",autoComplete:"email",autoFocus:!0,value:o,onChange:s=>h(s.target.value)}),e.jsx(l,{margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",autoComplete:"current-password",sx:{mt:0},value:r,onChange:s=>p(s.target.value)}),e.jsx(D,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,bgcolor:"secondary.main"},children:"Log in"}),e.jsx(E,{to:"/signup",children:"Don't have an account? Sign Up"})]})]}),e.jsx(W,{sx:{mt:8,mb:4}})]})}function U(){const{user:t}=c();return t?e.jsx(m,{to:"/home"}):e.jsx(R,{})}const I=T("/login/")({component:U,pendingComponent:d});export{I as Route};
