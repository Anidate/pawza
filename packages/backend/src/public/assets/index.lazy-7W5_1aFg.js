import{a as L,u as c,r as i,d as F,j as e,N as m,F as d,B as u,A as S,T as x,e as T,L as A,s as k,c as D}from"./index-DrTOdhyd.js";import{C as E,d as P}from"./LockOutlined-wf81gYsM.js";import{T as l}from"./TextField-9Aj2Hnac.js";const W=t=>L.post("/auth/login",t);function B(t){return e.jsxs(x,{variant:"body2",color:"text.secondary",align:"center",...t,children:["Copyright Â© Pawza ",new Date().getFullYear(),"."]})}function R(){const{setUser:t,user:a}=c(),[o,p]=i.useState(""),[r,h]=i.useState(""),{mutateAsync:g,isPending:f,isSuccess:j}=F({mutationFn:s=>W(s)}),y=async s=>{s.preventDefault();try{const n=await g({email:o,password:r});if(n.status===200){const{user:C,token:b,refreshToken:w}=n.data;t(C),k(b,w)}}catch{}};if(a)return e.jsx(m,{to:"/home"});const v=f||j&&!a;return e.jsxs(E,{maxWidth:"xs",sx:{py:"12lvh"},children:[v?e.jsx(d,{}):e.jsxs(u,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(S,{sx:{m:1,bgcolor:"secondary.main"},children:e.jsx(P,{})}),e.jsx(x,{component:"h1",variant:"h5",children:"Log in"}),e.jsxs(u,{component:"form",onSubmit:y,noValidate:!0,sx:{mt:1},children:[e.jsx(l,{margin:"normal",required:!0,fullWidth:!0,label:"Email",autoComplete:"email",autoFocus:!0,value:o,onChange:s=>p(s.target.value)}),e.jsx(l,{margin:"normal",required:!0,fullWidth:!0,label:"Password",type:"password",autoComplete:"current-password",sx:{mt:0},value:r,onChange:s=>h(s.target.value)}),e.jsx(T,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,bgcolor:"secondary.main"},children:"Log in"}),e.jsx(A,{to:"/signup",children:"Don't have an account? Sign Up"})]})]}),e.jsx(B,{sx:{mt:8,mb:4}})]})}function U(){const{user:t}=c();return t?e.jsx(m,{to:"/home"}):e.jsx(R,{})}const N=D("/login/")({component:U,pendingComponent:d});export{N as Route};
